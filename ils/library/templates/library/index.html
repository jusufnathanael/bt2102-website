{% extends "library/layout.html" %}

{% load static %}

{% block head %}
<link href="{% static 'library/main.css' %}" rel="stylesheet">
{% endblock %}

{% block search %}
<div class="bar">
    <a class="color" href="{% url 'index' %}">Search</a>
</div>
{% endblock %}


{% block body %}

{% include "library/search.html" %}

<div class="view">
    <div class="view_scroll">

        {% for book in booksmongo %}
        <div class="view_in">

            <div class="book">
                <div class="book_title">{{ book.1 }}</div>
                <div class="content">
                    <b>
                        by {% for author in book.9 %}
                        {% if forloop.last %} {{ author }}.
                        {% else %} {{ author }},
                        {% endif %}
                        {% endfor %}
                    </b>
                    {% if book.4 %}
                    {{ book.4 | date:"Y" }}.
                    {% endif %}
                    Category: {% for category in book.10 %}
                    {% if forloop.last %} {{ category }}.
                    {% else %} {{ category }},
                    {% endif %}
                    {% endfor %}
                    <div class="description">
                        {{ book.6 }}
                    </div>
                </div>
            </div>

            <div class="availablity">
                {% if book.11 == "AVAILABLE" %}
                <div class="status">STATUS: {{ book.11 }}<br></div>
                <a href="{% url 'borrow' book.0 %}">
                    <div class="borrow">Borrow</div>
                </a>
                {% elif book.11 == "BORROWED" %}
                <div class="status">
                    STATUS: {{ book.11 }}<br>
                    EXPECTED DUE DATE: {{ book.12 }}
                </div>
                <a href="{% url 'reserve' book.0 %}">
                    <div class="borrow">Reserve</div>
                </a>
                {% elif book.11 == "RESERVED" %}
                <div class="status">
                    STATUS: {{ book.11 }}
                    {% if book.12 %}
                    EXPECTED DUE DATE: {{ book.12 }}
                    {% endif %}
                </div>
                {% else %}
                <div class="status">
                    STATUS: {{ book.11 }}
                </div>
                {% endif %}
            </div>

        </div>
        {% endfor %}
    </div>
</div>

{% comment %}

<h1>Books</h1>
<ul>
    {% for book in books %}
    <li>
        <a href="{% url 'details' book.0 %}">Book</a>
        ({{ book.0 }}): {{ book.1 }} - {{ book.2 }}
        {% if book.2 == "AVAILABLE" %}
        <a href="{% url 'borrow' book.0 %}">BORROW</a>
        {% elif book.2 == "BORROWED" %}
        <a href="{% url 'reserve' book.0 %}">RESERVE</a>
        <a href="{% url 'extend' book.0 %}">EXTEND</a>
        {% elif book.2 == "RESERVED" %}
        <a href="{% url 'cancel' book.0 %}">CANCEL</a>
        {% else %}
        UNAVAILABLE
        {% endif %}
        <a href="{% url 'restore' book.0 %}">RETURN BOOK</a>
    </li>
    {% endfor %}
</ul>

<ul>
    {% for book in booksmongo %}
    <li>
        {{book}}
    </li>
    {% endfor %}
</ul>

<a href="{% url 'logout' %}">Log Out</a>

<form action="{% url 'search' %}" method="get">
    <input class="search" type="text" name="qt" placeholder="Search titles">
    <input class="search" type="text" name="qa" placeholder="Search authors">
    <input class="search" type="text" name="qc" placeholder="Search categories">
    <input class="search" type="text" name="qy" placeholder="Search year">
    <input type="submit" value="submit">
    <input type="checkbox" name="qtest" value="one">
    <input type="checkbox" name="qtest" value="two">
    <input type="checkbox" name="qtest" value="three">
    <input type="checkbox" name="qtest" value="four">
    <input type="checkbox" name="qtest" value="five">
    <input type="checkbox" name="qtest" value="six">
</form>

{% endcomment %}

{% endblock %}